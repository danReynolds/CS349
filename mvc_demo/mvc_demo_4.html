<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>MVC demo 4</title>
</head>
<body>

<div id="app">

    <!-- template is an HTML5 tag that says this content is a template and should be ignored -->

    <!--
    We get rid of IDs in the template code for reasons that will be clear in later demos
    Instead, we'll switch them to classes
    -->
    <template id="excitement_level_text_view_template">
        Your current excitement level is: <span class="excitement_span">1</span>
    </template>

    <template id="excitement_level_slider_template">
        Set your excitement level: <input type="range" class="excitement_slider"/>
    </template>

    <!-- Alternatively, for older browsers, you can use a script tag for the same end -->
    <script id="excitement_level_buttons_template" type="text/html">
        <button class="decrement_button">Lower Your Excitement</button>
        <button class="increment_button">Increase Your Excitement</button>
    </script>
</div>

<button id="make_ui_button">
    Make User Interface
</button>

<div style="margin-top: 40px;">
    <a href="mvc_demo_3.html">Previous demo (MVC 3)</a>
    <a href="mvc_demo_5.html">Next demo (MVC 5)</a>
</div>

<!--
    Underscore will create a variable named _ that will provide a bunch of functionality.
    We'll use its functional aspects
-->
<script src="ext/underscore.js"></script>
<script>

    /*
       In this demo, we have enclosed each of our previous interface parts in template
       elements (and one in a script element). Why do this?

       The template tag represents a block of code that you wish to instantiate later,
       using JavaScript. You can also achieve the same end using a script, as illustrated
       above. In both cases, the browser will not render the content. You need to
       programmatically retrieve it, and render it to the screen yourself.

       The code below shows how we can load each of the parts and display them, by creating
       new elements and appending them to the app.

       For simplicity's sake, the MVC interaction code is removed. We'll add that back
       in the next demo.
     */

    window.addEventListener('load', function() {
        // All of the old UI code is gone, for now
        // Now, all we have is this button to actually create the UI
        var makeUIButton = document.getElementById('make_ui_button');
        makeUIButton.addEventListener('click', function() {
            makeUI();
            // This will set the CSS of the button to remove it from the view
            // We do this after making the UI, since we don't need it around, anymore
            makeUIButton.setAttribute('style', 'display: none');
        });
    });

    function makeUI() {
        var excitementLevelTextViewTemplate = document.getElementById('excitement_level_text_view_template');
        var excitementLevelSliderTemplate = document.getElementById('excitement_level_slider_template');
        var excitementLevelButtonsTemplate = document.getElementById('excitement_level_buttons_template');
        var appDiv = document.getElementById('app');

        // For each template, we get its innerHTML, and set it to the innerHTML of a new div
        // Then we add each new div to the app div
        var textDiv = document.createElement('div');
        textDiv.innerHTML = excitementLevelTextViewTemplate.innerHTML;
        appDiv.appendChild(textDiv);

        var sliderDiv = document.createElement('div');
        sliderDiv.innerHTML = excitementLevelSliderTemplate.innerHTML;
        appDiv.appendChild(sliderDiv);

        var buttonsDiv = document.createElement('div');
        buttonsDiv.innerHTML = excitementLevelButtonsTemplate.innerHTML;
        appDiv.appendChild(buttonsDiv);
    }

    /*
    Again, this seems like a bit of a step backwards: It now takes more code to render what
    we originally had. We'll start to see the advantages of this approach in the next demo,
    when we pull these tidbits into view classes
     */

    // Original author: Michael Terry (mterry@cs.uwaterloo.ca)
</script>
</body>
</html>